<div class="converter-container">
  <mat-card class="main-card">
    <mat-card-header>
      <mat-card-title class="main-title">
        <mat-icon class="title-icon">translate</mat-icon>
        Alien Numerals Converter
      </mat-card-title>
      <mat-card-subtitle>
        Convert custom Alien Numerals to integers using subtractive notation
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <!-- Main content grid -->
      <div class="content-grid">
        
        <!-- Left column: Conversion form -->
        <div class="form-column">
          <mat-card class="form-card">
            <mat-card-header>
              <mat-card-title>Convert Alien Numerals</mat-card-title>
            </mat-card-header>
            
            <mat-card-content>
              <!-- Input form -->
              <form class="conversion-form">
                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Alien Numeral</mat-label>
                  <input 
                    matInput 
                    [formControl]="alienInput"
                    placeholder="e.g. AAA, LBAAA, RCRZCAB"
                    (keypress)="onKeyPress($event)"
                    [class.error-input]="alienInput.invalid && alienInput.touched"
                    autocomplete="off">
                  <mat-hint>Enter valid alien numeral characters (A, B, Z, L, C, D, R)</mat-hint>
                  <mat-error *ngIf="alienInput.invalid && alienInput.touched">
                    {{ getValidationErrorMessage() }}
                  </mat-error>
                </mat-form-field>

                <!-- Action buttons -->
                <div class="button-group">
                  <button 
                    mat-raised-button 
                    color="primary" 
                    (click)="convert()"
                    [disabled]="isConvertDisabled()"
                    class="convert-button">
                    <mat-spinner *ngIf="isLoading" diameter="20" class="button-spinner"></mat-spinner>
                    <mat-icon *ngIf="!isLoading">swap_horiz</mat-icon>
                    {{ isLoading ? 'Converting...' : 'Convert' }}
                  </button>
                  
                  <button 
                    mat-stroked-button 
                    (click)="clear()"
                    [disabled]="!alienInput.value"
                    class="clear-button">
                    <mat-icon>clear</mat-icon>
                    Clear
                  </button>
                </div>

                <!-- Result display -->
                <div class="result-container">
                  <div class="result-box" [ngClass]="{
                    'result-success': hasSuccess(),
                    'result-error': hasError(),
                    'result-default': !hasSuccess() && !hasError()
                  }">
                    <div class="result-label">Result:</div>
                    <div class="result-value">{{ getResultText() }}</div>
                  </div>
                </div>
              </form>

              <!-- Examples section -->
              <div class="examples-section">
                <h3 class="examples-title">
                  <mat-icon>lightbulb_outline</mat-icon>
                  Quick Examples
                </h3>
                <div class="examples-grid">
                  <mat-chip-listbox>
                    <mat-chip-option 
                      *ngFor="let example of examples"
                      (click)="useExample(example)"
                      class="example-chip">
                      <strong>{{ example.input }}</strong> â†’ {{ example.output }}
                    </mat-chip-option>
                  </mat-chip-listbox>
                </div>
                <p class="examples-hint">Click any example to try it automatically</p>
              </div>
            </mat-card-content>
          </mat-card>
        </div>

        <!-- Right column: Symbol table -->
        <div class="table-column">
          <mat-card class="table-card">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>table_chart</mat-icon>
                Alien Numeral Symbols
              </mat-card-title>
            </mat-card-header>
            
            <mat-card-content>
              <div class="table-container">
                <table mat-table [dataSource]="symbols" class="symbols-table">
                  <ng-container matColumnDef="symbol">
                    <th mat-header-cell *matHeaderCellDef>Symbol</th>
                    <td mat-cell *matCellDef="let element" class="symbol-cell">
                      <span class="symbol-badge">{{ element.symbol }}</span>
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="value">
                    <th mat-header-cell *matHeaderCellDef>Value</th>
                    <td mat-cell *matCellDef="let element" class="value-cell">{{ element.value }}</td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

      <!-- Rules section (expandable) -->
      <mat-expansion-panel class="rules-panel">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-icon>help_outline</mat-icon>
            Conversion Rules & Guidelines
          </mat-panel-title>
        </mat-expansion-panel-header>
        
        <div class="rules-content">
          <div class="rule-section">
            <h4>Basic Rules</h4>
            <ul>
              <li>Alien numerals are read from left to right</li>
              <li>Values are added together unless subtractive rules apply</li>
              <li>Only characters A, B, Z, L, C, D, R are valid</li>
            </ul>
          </div>

          <div class="rule-section">
            <h4>Subtractive Rules</h4>
            <p>When a smaller value appears before a larger value, it is subtracted:</p>
            <div class="subtractive-examples">
              <div class="example-item">
                <strong>AB</strong> = 4 (B - A = 5 - 1)
              </div>
              <div class="example-item">
                <strong>AZ</strong> = 9 (Z - A = 10 - 1)
              </div>
              <div class="example-item">
                <strong>ZL</strong> = 40 (L - Z = 50 - 10)
              </div>
              <div class="example-item">
                <strong>ZC</strong> = 90 (C - Z = 100 - 10)
              </div>
              <div class="example-item">
                <strong>CD</strong> = 400 (D - C = 500 - 100)
              </div>
              <div class="example-item">
                <strong>CR</strong> = 900 (R - C = 1000 - 100)
              </div>
            </div>
          </div>

          <div class="rule-section">
            <h4>Examples</h4>
            <div class="example-breakdown">
              <div class="example-complex">
                <strong>RCRZCAB</strong> = 1994
                <div class="breakdown">
                  R (1000) + CR (900) + ZC (90) + AB (4) = 1994
                </div>
              </div>
            </div>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-card-content>
  </mat-card>
</div>
